<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß∂ Ravelr OAuth 2.0 Callback</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .code-box { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 5px; font-family: monospace; word-break: break-all; }
        .error { color: red; font-weight: bold; }
        .success { color: green; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß∂ Ravelr OAuth Callback</h1>
        <div id="result"></div>
        <div id="debug"></div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const result = document.getElementById('result');
        const debug = document.getElementById('debug');
        
        // Show all parameters for debugging
        debug.innerHTML = '<h3>Debug Info:</h3>' +
            '<div class="code-box">Full URL: ' + window.location.href + '</div>' +
            '<div class="code-box">All params: ' + JSON.stringify(Object.fromEntries(params), null, 2) + '</div>';
        
        if (params.get('error')) {
            result.innerHTML = '<div class="error">‚ùå Error: ' + params.get('error') + '</div>';
            if (params.get('error_description')) {
                result.innerHTML += '<div>Description: ' + params.get('error_description') + '</div>';
            }
        } else if (params.get('code')) {
            result.innerHTML = '<div class="success">‚úÖ Success!</div>' +
                '<div>Authorization Code:</div>' +
                '<div class="code-box">' + params.get('code') + '</div>';
            if (params.get('state')) {
                result.innerHTML += '<div>State:</div>' +
                    '<div class="code-box">' + params.get('state') + '</div>';
            }
        } else {
            result.innerHTML = '<div class="error">‚ùå No code or error found</div>';
        }
    </script>
</body>
</html>
